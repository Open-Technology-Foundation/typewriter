#!/usr/bin/env bash
# Bash completion for typewriter and tw commands

_typewriter_completion() {
  local cur prev opts speeds colors indents
  COMPREPLY=()
  cur="${COMP_WORDS[COMP_CWORD]}"
  prev="${COMP_WORDS[COMP_CWORD-1]}"

  # Speed options
  speeds="xxxfast xxfast xfast vfast fast normal slow vslow xslow xxslow xxxslow"

  # Common ANSI color codes
  colors="30 31 32 33 34 35 36 37 1;30 1;31 1;32 1;33 1;34 1;35 1;36 1;37 4;30 4;31 4;32 4;33 4;34 4;35 4;36 4;37"

  # Common indent values
  indents="0 1 2 3 4 5 6 7 8 9 10 12 16 20"

  # Main options
  opts="-s --speed -i --indent -c --color -n --no-newline -V --version -h --help"

  case "${prev}" in
    -s|--speed)
      mapfile -t COMPREPLY < <(compgen -W "${speeds}" -- "${cur}")
      return 0
      ;;
    -i|--indent)
      mapfile -t COMPREPLY < <(compgen -W "${indents}" -- "${cur}")
      return 0
      ;;
    -c|--color)
      mapfile -t COMPREPLY < <(compgen -W "${colors}" -- "${cur}")
      return 0
      ;;
    *)
      ;;
  esac

  if [[ ${cur} == -* ]]; then
    mapfile -t COMPREPLY < <(compgen -W "${opts}" -- "${cur}")
    return 0
  fi

  return 0
}

# Register completion for both typewriter and tw commands
complete -F _typewriter_completion typewriter
complete -F _typewriter_completion tw

#fin